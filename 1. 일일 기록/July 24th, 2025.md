---
title: "July 24th, 2025"
created: 2025-07-24 07:24:06
updated: 2025-08-01 07:45:52
---
  * 07:24 cig 2
  * 할 일
    * 표 안에 표가 있는 칸을 처리해서 표에 해당하는 글을 지우고 따로 뺀 표를 가리키도록 치환
    * 병합칸 채우는 방법 pymupdf4llm에서 찾아서 khm 소스에 넣기
    * ogg 서버에 있는 split 디렉토리 확인
    * fastAPI api 만들기 [[July 21st, 2025#^2cnjFf7vv|api 설계 ^2cnjFf7vv]]
    * 디버거 설정 여러 개 시도해보기
    * batch 적재 시간 측정 필요
  * 명경지수 -> 명징한 생각
  * 07:35 markdown_preprocess.py를 전에 만들었는데 필요 없을 것 같다. 이건 전에 NestedTableProcessor라는 클래스 만들어서 md 파일 중 중첩표를 처리하도록 했는데 안 된다. 어제 부모, 자식 표를 서로 가리키도록 한 것이 되었으니 이걸로 대체.
  * nested_table_process_sample.py도 필요 없으니 정리.
  * pdf2md.py를 test_reader.py처럼 load_data가 LlamaIndexDocument 돌려주도록 수정하려고 소스를 보다 보니 시간이 좀 걸릴 것 같다. 이건 나중에 정리하기로 하고 일단, test_reader.py를 그대로 쓰면서 중첩표 처리부터 마무리하기로...
  * pdf_markdown_reader.py 재분석
    * to_markdown 결과를 그대로 돌려주면 되는데 일단 _process_nested_tables가 돌려주는 값 재확인
      * enhanced_markdown = _process_nested_tables(page, page_text, hdr_info)는 page_text에 단순히 중첩표 분석한 내용을 추가할 뿐.
  * 08:31 pdf_markdown_reader.py에서 _process_nested_tables를 빼고 내가 작업한 to_markdown() 결과를 그대로 LlamaIndexDocument에 넣어서 돌려주는 것으로 수정. 테스트 시작
    * 테스트 도중, 기존 to_markdown()이 일부 결과를 제대로 보여주지 못한다는 것이 생각났는데...가만...전에 basicmarkdown에는?
    * 일단 khm 소스와 내가 작업한 것 결과를 비교하기 위해 둘 다 로그와 md를 보관하기로.
  * python에서도 C define처럼 조건에 따라 다른 로직을 실행할 수 있게 하는 방법 찾기 -> 그런 건 없고 그냥 if/else 사용.
  * 09:03 이제 내 방식으로 한 것 테스트 결과와 khm 결과 비교 시작
    * 내 거는 제목 표기 "#"이 그대로 살아있는데 khm은 아예 없음.
    * 문서 정보는 khm에만 있음.
    * 내 거는 공백줄이 너무 많은데다 추출한 글 중간에 <br>이 많다.
    * p6 0. 기본요약 및 연관컨텐츠 제목과 그 밑에 번호 없는 소제목이나 표가 제대로 표시되지 않는 문제!! 이거는 해결해야 한다. -> khm의 FALLBACK을 쓰면 해결됨.
    * p7 병합칸 처리 문제. 열병합을 행병합으로 바꿔 버렸다. -> 이건 그냥 khm이 한 것처럼 빈칸으로..
    * p18에 그림으로 표시한 게 제대로 안 나오는 것...khm도 문제가 있긴 마찬가지인데...열병합을 행병합으로 바꾼 것도 p7과 동일
    * p19에 로밍 행병합 문제
  * 09:41 cig 4
  * 09:51 to_markdown 기본 결과 비교
    * to_markdown 결과가 다르다. 확실히 내가 작업한 to_markdown은 제목을 추출하지 않는다.
    * 일단 pymupdf_rag.py를 pymupdf_rag_custom_and_myjo.py로 보관하고 custom_pdf에서 pymupdf_rag.py를 가져와서 pymupdf_rag_map15.py와 비교하기로
  * 11:10 cig 5
  * 12:36 cig 6
  * 12:55 pdf의 제목은 어디서 처리하지?
  * 13:43 cig 7
  * 14:22 스크럼 회의
    * 인터페이스 정의가 항상 먼저
  * 15:33 cig 8
  * 스크럼 회의 정리
    * SI 프로젝트에서 인터페이스 정의가 항상 먼저 진행되어야 한다.
    * 다음 주, 7월 말까지 개발 완료하면 8월 첫째 주에 고객이 테스트해 볼 예정
    * split 문서 처리할 때 병렬처리 가능? chunking이 이미 되었기 때문에 병렬 처리해도 되나?
  * 15:48 claude 문답 중 "pymupdf4llm 분석"의 두 번째 답 그대로 pymupdf4llm의 pymupdf_rag.py에 적용하면 된다.
  * 17:21 답답해서 집에 가서 하기로.
  * 19:02 cig 10
