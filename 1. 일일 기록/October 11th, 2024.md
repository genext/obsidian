---
title: "October 11th, 2024"
created: 2024-10-11 00:00:00
updated: 2024-10-23 14:42:42
---
  * 06:00 출근
  * 06:15 테스트를 하면서 디버그해야 하는데 블록체인쪽에서 계속 duplicate requestId가 난다. 10월 10일일자로 생성하는데 난 안 했는데 왜 그러지? 아마 다른 사람이 테스트한 것이 블록체인쪽 기록에 남아 있는 듯.
  * 06:21 배포 시 deployed address와 abi를 제대로 저장하는지 확인 시작.
    * prepareDeploy
      * 배포 권리가 있는 회사 정보로 signer 정보 얻기
      * 요청 ID로 abi, bytecode 얻기
      * construcParams 값 얻기
    * wallet.sdk의 deployContract 실행
    * DB update.
  * 06:27 문득 든 생각이 registVcAccount에 들어가야 하는 데이터가 바우처뿐만 아니라 배포주소 관리 스마트계약의 배포주소도 들어가야 하나?
    * 06:35 배포주소 관리 스마트계약의 배포주소를 기존에 넣었던 은행 바우처 배포주소가 아닌 배포주소 관리의 배포주소를 넣었더니 다른 에러 발생.
      * wallet sdk error: Invalid input provided for 'contractAddress': 
    * 배포주소 관리의 배포주소를 먼저 넣고, 바우처의 배포주소를 그 다음에 놓고 테스트 --> 동일한 에러
    * 다시 원상태로
      * 이번에는 이전 에러가 나지 않고 방금 위에서 난 에러 발생.
  * 07:05 init factor value 문제일까?
  * [x] 07:10 init factor value부터 시작해서 각 변수나 매개변수값에 들어가야 할 데이터를 재확인
  * 10:50 UUID 복사해서 사용. 시작
  * 11:04 배포주소 registVcAccount 에서 Zero length Big Integer 에러 원인 찾기 위해 inputParams에 들어가는 것을 하나씩 숫자로 대체하면서 반복 테스트.
  * 11:45 배포가 안 된 걸 가지고 테스트를 했으니 에러가 난 것 같다. 지금까지 테스트한 것은 배포주소가 없는 것이었다. 화면에서 배포완료된 바우처만 나타나도록 했다. 
  * 11:54 그리고 블록체인에서 돌려준 결과를 파싱하는 것도 빠뜨렸다. 오라클만 수정하고 배포주소 관리는 수정하지 않았다. 이제 다시 새롭게 테스트시작.
  * 12:25 하아...UUID 수정할 때 영향도를 생각했어야 하는데...그냥 수정부터 했다가 되던 것도 안 되게 했다. 영향도를 잊지 말자.
  * [x] UUID를 블록체인 직전에만 별도로 만들어서 사용. 기존 DTO를 수정하면 안 된다!! --> 하지만 계속 배포가 가능하다는 문제가 있음. 전에는 duplicate key 에러가 발생했지만...
  * 12:54 드디어 배포관리 항목추가하기가 되었다. 로그를 제대로 확인하지 않으면 바보처럼 굴게 된다. 벌써 몇 번이나 반복했지 않나. 일이 많아도 이제는 차분하게 하자.
  * 13:27 이정주 팀장과 논의해서 
    * UUID를 쓰는 방향으로 대신, 서버에서 배포 요청을 받았을 때 해당 요청과 일치하는 테이블 키를 가지고 배포 되었는지 안 되었는지를 먼저 판단해서 알려주는 것 추가
    * registVcAccount 할 때 중복값이라고 나온 게 숫자 3 이거 확인 필요.
    * 바우처 배포 후 배포주소 관리와 묶어서 자동 저장 추가.
      * 문제가 하나 있는데 created_by, updated_by를 누구로 해야 하나? 은행이 바우처를 배포해서 실행하지만 사실 이건 금결원 시스템 내에서 실행되는 것이고 VcMgt도 금결원이 관리한다.
        * 이정주 팀장 의견은 시스템이 하는 것이면 0으로 하자는 것.
  * 14:21 네트웍 연결 문제로 잠시 쉬어가면서 코딩.
  * 15:36 네트웍 복구
  * 16:32 바우처 배포 반복 테스트 -> 한 번 배포되면 다시 배포하지 않도록 사전 차단.
  * [x] alert 대신 toast로 수정.
  * [x] 바우처 배포 실행한 후, 화면 reload, 그리고 배포 버튼 비활성화
  * [x] 바우처 배포처럼 배포주소 배포도 배포하는 동안에는 deploying을 띄우도록.
  * 17:07 react에서 axios 사용 시 에러 발생할 때에 대한 처리에서 약간 막힘. 용례를 찾아서 수정할 예정.
  * [x] 오라클과 바우처 관리에서 getContractAddress가 없다. 
  * [x] 바우처 배포 후 insertRegist 자동실행
