---
title: "vi"
created: 2024-03-29 10:04:45
updated: 2025-09-17 12:48:44
---
## VI 3 mode
### ESC(명령) 모드
```plain text
ESC 모드에서 사용되는 몇가지 기호

G : 화일의 맨끝
^ : 현재줄의 맨앞 (빈칸무시)
0 : 현재줄의 맨앞
$ : 현재줄의 맨뒤
% : 짝을 이루는 기호 확인하기
w : 다음 단어
b : 이전 단어
e : 현재 단어의 끝 글자

여러가지 특수한 기호들
. : 한글자를 대표하는 기호 (dos 의 ? 와 동일)
* : 여러개의 문자를 동시에 대표하는 기호
^ : 줄의 처음시작.
$ : 줄의 맨끝.
% : 처음줄부터 끝줄까지
\ : 특수한 기호들이 가지는 뜻을 없앨때 사용. : 일정한 제한을 두어 글자를 대표하고자 하는 기호.
[a-z] : a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z 를 대표
[A-Z] : A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z 를 대표
[AB] : A 또는 B
p[aeiou]t: pat, pet, pit, pot, put 를 대표
[0-9] : 0,1,2,3,4,5,6,7,8,9 를 대표

1. 커서 움직이기
1.1 h,j \ k,l 
1.2 줄 단위 이동
^ : 줄의 맨앞으로 (빈칸무시)
0 : 줄의 맨앞으로
$: 줄의 맨뒤로
% : 짝을 이루는 기호 확인하기
+ : 다음줄의 첫번째 글자로
- : 윗줄의 첫번째 글자로
n| : 현재줄의 n 번째 열로 (n은 임의의 숫자)
H : 화면상에 처음줄로
M : 화면상의 중간줄로
L : 화면상의 마지막줄로
nH : 화면상의 처음줄로부터 n 줄 밑으로
nL : 화면상의 마지막줄로부터 n 줄 위로
G : 맨 마지막줄로 (go)
nG : n 번째줄로
gg : 맨 마지막줄로
ngg : n 번째줄로
:n : n 번째줄로
1.3 단어 단위 이동
w : 한단어 오른쪽으로 (word)
b : 한단어 왼쪽으로 (back)
e : 현재 단어의 끝으로 이동 (end)
E : 현재 단어의 끝으로 이동 (구두점 무시 - 영문자에 해당 - ? . !.)
) : 다음 문장의시작으로
( : 이전 문장의 시작으로
} : 다음 문단의 시작으로
{ : 이전 문단의 시작으로
]] : 다음 섹션의 시작으로
[[ : 이전 섹션의 시작으로
1.4 화면단위 이동
Control - F(orward) 한화면 밑으로 이동.
Control - B(ackward) 한화면 위로 이동.
Control - D(own) 반쪽화면 밑으로 이동.
Control - U(pon) 반쪽화면 위로 이동.
Control - E 커서는 현재위치 그대로 화면만 한줄씩 위로 이동
Control - Y 커서는 현재위치 그대로 화면만 한줄씩 아래로 이동
z 커서의 위치와 함께, 화면상의 맨위로
nz n번 라인을 화면상의 맨위로
z. 커서의 위치와 함께, 화면상의 중간으로
z- 커서의 위치와 함께, 화면상의 맨아래로
## Control - G 현재 편집문서의 정보 보여주기
## Control - L 화면 재표시 (글자가 깨졌을경우)
## Control - R(edraw) 화면 재표시 (글자가 깨졌을경우)

2. 찾기
/pattern pattern 이라는 단어 찾기 - 위에서 아래로
?pattern scully 라는 단어찾기 - 아래에서 위로
/ : 찾기반복 - 위에서 아래로
n : 찾기반복 - 위에서 아래로
? : 찾기반복 - 아래에서 위로
N : 찾기반복 - 아래에서 위로
fx : 현재줄에서 x문자 찾기 - x 는 한개의 글자 -
Fx : 현재줄에서 반대방향으로 x문자 찾기 - x 는 한개의 글자 -
tx : 현재줄에서 x문자를 찾아서 바로전에 커서놓기
Tx : 현재줄에서 반대방향으로 x문자를 찾아서 바로후에 커서놓기
; : 현재줄에서 한글자 찾기반복
' : 현재줄에서 한글자 찾기반복 - 반대방향으로 -
## 찾기와 편집명령의 응용 ##
d/simple simple 이라는 단어가 나올때까지 지우기
d/^scully 줄의 맨앞에 scully 라는 단어가 나올때까지 지우기
y/yahoo yahoo 라는 단어가 나올때까지 복사하기
```
### 편집모드
 ```plain text
1. 편집하기
1.1 복사, 붙이기, 합치기
y : (Yank) 복사하기 
yy 한줄복사 2yy 두줄복사 nyy n줄 복사 (n 은 임의의숫자) 
yw 한단어 복사 y2w 두단어 복사 y$ 그줄 끝까지 복사 y0(y^) 
그줄 처음까지 복사 yG 문서의 끝까지 복사 Y 한줄복사 (yy 와 동일)

## 마지막 명령어의 반복 ##
. : 마지막에 수행한 명령어를 반복한다. 2. 명령어를 2번 반복한다.
p :(Put or Paste) 붙이기 p 아래로(오른쪽으로) 붙이기 2p 아래로(오른쪽으로) 두번 붙이기 
P 위로(왼쪽으로) 붙이기 2P 위로(왼쪽으로) 두번 붙이기
J : (Join) 두줄 합치기 J 현재줄을 윗줄에 붙이기 (두줄 합치기) 3J 세줄합치기

1.2 지우기, 복구하기, 바꾸기
d : (Delete) 지우기 dd 한줄지우기 2dd 두줄지우기 ndd n줄지우기 (n 은 임의의숫자)
 dw 한단어 지우기 d2w 두단어 지우기 d$ 그줄 끝까지 지우기 d0(d^) 
그줄 처음까지 지우기 dG 문서 끝까지 지우기 D 그줄 끝까지 지우기 (d$ 와 동일)
u : (Undo) 복구하기 u 한번복구하기 2u 두번복구하기
c : (Change) 바꾸기 cc 한줄바꾸기 2cc 두줄바꾸기 ncc 여러줄 바꾸기 (n 은 임의의숫자)
 cw 한단어 바꾸기 ce 한단어 바꾸기 (공백 제외) c2w 두단어 바꾸기
 c$ 그줄 끝까지 바꾸기 c0(c^) 문서 끝까지 바꾸기 C 그줄 끝까지 바꾸기 (c$ 와 동일)
r : (Replace) 한글자 바꾸기 r 한글자 바꾸기 2r 두글자 바꾸기
## r 명령어는 insert 모드로 바뀌지 않는다. ##
R : 바꾸면서 덮어 쓰기
s : 한글자 지우고 insert 모드로 - cl 와 동일 -
S : 한줄지우고 insert 모드로 - cc 와 동일 -
~ : 대문자 <-> 소문자 바꾸기 - 영문자에만 해당 -
## 지우기와 바꾸기의차이점은 바꾸기 명령어 후에 ##
## vi 편집모드로 바뀐다. ##

i : insert 현재커서위치 10i* * 문자를 10개 집어넣기 25i=- =- 를 25개 반복하기
I : 현재커서가 위치한 줄의 맨처음에
a : append 현재커서위치 바로 다음에
A : 현재커서가 위치한 줄의 맨끝에
o : open 현재커서위치 바로 아래줄에
O : Open 현재커서위치 바로 윗줄에
2. 위치 기억하기
mx : mark 현재의 커서위치를 x 라는 문자로 기억
`x : 기억된 x 위치로 이동
`` : 이동하기 전의 위치로 (제자리)
'x : 기억된 x 위치의 맨 앞으로 이동
'' : 이동하기 전 위치의 맨앞으로 이동
3. 버퍼 이용하기
"xyy : x 라는 이름의 버퍼에 한줄 복사 하기
"xp : x 라는 이름의 버퍼에 저장된 내용을 붙이기
## 잠시 쉬었다 가기 ##
:= 현재 줄번호 보여주기
:/pattern/ = pattern 이 위치한 줄번호 보여주기
```
### 콜론모드(ex모드)
```plain text
ex 명령어의 기본형식
:k,l command m
(범위지정) (명령어) (명령이 수행될 위치)
----------------------------------------
예)
:1,10 co50 1 줄 부터 10 줄 까지를 50 줄 이후로 복사.
:34,50 d 34 줄 부터 50 줄 까지 삭제.
:100,150 m 10 100 줄 부터 150 줄까지를 10 줄 이후로 옮김.
:.,$ d 현재줄부터 끝까지 지우기
:.,+20 co -4 현재줄부터 20줄을, 4줄 위에 복사하기
:-,+ t 0 위, 아래로 한줄(총 3줄)씩을, 문서 맨위에 복사하기
:/pattern/ d pattern 이 들어있는 줄 지우기
:/pattern/ -nd pattern 이 들어있는 줄로부터 n 번째 윗줄 지우기
:/pattern/+nd pattern 이 들어있는 줄로부터 n 번째 아랫줄 지우기
:/pattern1/,/pattern2/ d pattern1 이 들어있는 줄부터, pattern2 가 들어있는 줄까지 지우기
:.,/pattern/ m 23 현재줄부터 pattern 이 들어있는 줄까지, 23번줄 이후로 옮기기

g 옵션 붙이기
    :g/pattern 화일전체에서 마지막으로 pattern 이 쓰여진 줄로 가기
    :g/pattern/ p 화일전체에서 pattern 이 있는줄 보여주기
    :g/pattern/ nu 화일전체에서 patterm 이 있는줄을 번호와 함께 보여주기
    :60,124 g/pattern/ p 60,124 줄 사이에서 pattern 이 들어있는줄 보여주기
저장 및 종료하기
    :w 저장하기 (write) :q 종료하기 (quit)
    :wq 저장하고 종료하기
    :x 저장하고 종료하기 (:wq 와 동일)
    :w! 강제로 저장하기 (read-only 로 열었을경우)
    :q! 편집한 내용을 저장하지 않고 종료하기
    :w new_file_name 새로운 파일이름으로 저장하기
    :w %.new 현재화일 이름에 .new 를 붙여서 새로운 화일로 저장.
		:w >> file.txt file.txt에 덧붙여서 저장
    :230,$ w file_name 230 줄부터 끝줄까지 file_name 으로 저장하기
    :.,600 w file_name 현재줄부터 600줄까지 file_name 으로 저장하기
    :1,10 w new_file 1줄부터 10줄까지 new_file 로 저장하기
    :340,$ w >> new_file 340줄부터 끝줄까지 new_file 에 추가하기
    8.4 읽기
    :r[ead] filename 현재위치에 filename 읽어들이기
    :r /usr/local/data 현재위치에 /usr/local/data 읽어들이기
    :185 r /usr/local/data 185줄 이후에 /usr/local/data 읽어들이기
    :$ r /usr/local/data 맨끝줄 이후에 /usr/local/data 읽어

다중편집하기
    vi file1 file2 file3
    :args 편집중인 화일목록 보여주기
    :n[ext] 다음 화일로 넘어가기
    :prev[ious] 이전화일로 돌아가기
    ## 편집중인 화일이 저장되지 않으면 다음 화일로 넘어갈수 없다. ##
    새로운 화일 편집하기
    :e[dit] file_name 새로운 file_name 편집하기.
    :e! 현재의 편집중인 내용을 무시하고 가장 최근에 편집한 내용을 다시편집하기
    8.6 g 옵션과 바꾸기
    :m,n s/old/new/g
    :g/pattern/ s/old/new/g
    -------------------------
    :1,30 s/his/the/gc 1 줄부터 30 줄까지 his 를 the 로 바꾸면서 확인하기.
    :g/BX/ s/Esc/ESC/g BX가 있는줄만 찾아서 Esc 를 ESC 로 바꾸기.
    :% s/editer/editor/g 처음줄부터 마지막줄까지, editer 를 editor 로 바꾸기
    :g/editer/ s//editor/g 위와 동일("s/" 다음에 인자가 없어서 윗줄과 같은효과)
```
## Editor buffer
```plain text
vi는 총 17개의 레지스터가 있다. 레지스터 내용은 :reg 명령으로 볼 수 있다.

"": 바로 이전에 지워진 내용.
"1 ~ "9: 지워진 내용이 큐 형식으로 들어감.
·.: 최근에 타이핑한 내용.
"%: 현재 편집하는 파일명.
"/: 가장 최근에 검색한 문자열.

붙여넣기할 때 레지스터 번호를 선택할 수 있음. "2p"하면 2번 레지스터에 있는 내용을 붙여넣기.

위 기본 레지스터 외에 a부터 z까지 26개의 레지스터가 있으며 자주 사용하는 문자열을 저장해서 사용 가능.

"a3yy "a는 a라는 레지스터에 저장하라는 의미이고 3yy는 현재 커서 위치에서 3행을 복사해서 저장.
"ap "a 레지스터에 있는 내용을 붇이라는 의미.

또는 레지스터에 자주 사용하는 명령어를 매크로로 지정해서 저장할 수 있다.
```
## Block Marking
```plain text
편집 모드에서 v를 사용.

특정 부분만 블록 지정하고 싶으면 ctrl+v를 사용하면 커서 위치를 기준으로 블록 지정 가능.

블록지정 후 사용 가능한 키.
~:대소문자 전환.
d: 삭제.
y: 복사.
c: 치환.
>: 행 앞에 tab 삽입.
<: 행 앞에 tab 제거.
:선택된 영역에 대하여 ex 명령.
J: 행을 합침.
U: 대문자로 만듬.
u: 소문자로 만듬.
```
## Move by Mark
```plain text
알파벳을 이용하여 파일 여러 곳에 표시하고 이동할 수 있음.

ma: a로 표시
'a: a로 이동.
```
## Undo/Redo
```plain text
u: 명령 취소.
ctrl + r: 명령 되살리기
```
## Replace
```plain text
:[범위]/[패턴]/[매칭 문자열]/[치환 문자열]/[행 범위]
:s/old/new 현재 형의 처음 old를 new로 교체
:s/old/new/g 현재 행의 모든 old를 new로 교체
:%/old/new/g %는 문서 전체 의미
:2,4s/old/new/g 2행에서 4행 사이의 문자열 치환
:-1,+3s/old/new/g 위로 1행, 아래로 3행 되는 범위의 문자열 치환
위 예에서 마지막에 g를 안 붙이면 그 행에 일치하는 문자열이 여러 개 있어도 한 번만 치환됨.
마지막에 c를 붙이면 매번 치환 여부를 물어봄.
:g/pattern/s/old/new/g pattern이 있는 모든 행의 모든 old를 치환.
:g/pattern/s//new/g :%/old/new/g와 동일

패턴 치환 예
:g/\(^[^#].*test\|^test\)/s/test/str/g

Remove ^M 
:%s/^M//g
```
### Vim Regular Expression

| 기호          | 의미                            |
| ----------- | ----------------------------- |
| [ ]         | [ ] 사이의 문자 중 하나               |
| .           | 아무 문자나 한 문자 의미                |
| ^           | 행의 첫 문자([]안에서는 not을 의미)       |
| \t          | 탭 문자                          |
| \{mn, max\} | min 이상 max 이하 반복됨             |
| \+          | 앞의 내용이 1번 이상 반복됨              |
| \<          | 단어의 시작                        |
| \n          | 새 행 문자. **Windows \r\n 주의!!** |
| $           | 행의 끝                          |
| *           | 앞의 내용이 0번 이상 반복됨              |
| \>          | 단어의 끝                         |
| \|          | or를 뜻함                        |

## Shell command
```plain text
ex 모드에서 :![명령어]
```
## Multi Window
### 창 생성

| ESC(명령) mode | Colon(ex) mode | Effect                          | Remark                |
| ------------ | -------------- | ------------------------------- | --------------------- |
| ctrl+w s     | :sp[lit]       | 현재 파일을 두 개의 수평 창으로 나눔           |                       |
| ctrl+w v     | :[N]vs[plit]   | 새로운 수직 창 생성. N이 붙으면 N칸 크기의 창 분할 |                       |
| ctrl+w n     | :new           | 새로운 수평창 생성                      | Not working in neovim |
### 창 삭제

| ESC(명령) mode | Colon(ex) mode | Effect               | Remark                |
| ------------ | -------------- | -------------------- | --------------------- |
| ctrl+w q     | ":q[uit]!"     | 현재 커서 창 종료           |                       |
| ctrl+w c     | :clo[se]       | 현재 커서 창 닫기           |                       |
| ctrl+w o     | :on[ly]        | 현재 커서 창만 남기고 모든 창 삭제 | Not working in neovim |
### 창 이동

| ESC(명령) mode | Effect              | Remark |
| ------------ | ------------------- | ------ |
| ctrl+wh      | 왼쪽 창으로 이동현재 커서 창 종료 |        |
| ctrl+wj      | 아래쪽 창으로 이동          |        |
| ctrl+wk      | 위쪽 창으로 이동           |        |
| ctrl+wl      | 오른쪽 창으로 이동          |        |
| ctrl+ww      | 창을 순차적으로 이동         |        |
### 창 크기 조정

| ESC(명령) mode | Colon(ex) mode | Effect               | Remark |
| ------------ | -------------- | -------------------- | ------ |
| ctrl+w =     |                | 창의 크기를 모두 균등하게 함.    |        |
| ctrl+w _     |                | 수평분할에서 창의 크기를 최대화    |        |
| ctrl+w \|    |                | 수직분할에서 창의 크기를 최대화    |        |
| ctrl+w [N]+  | :res[ize] +N   | 창의 크기를 N행만큼 증가       |        |
| ctrl+w [N]-  | :res[ize] -N   | 창의 크기를 N행만큼 감소       |        |
| ctrl+w [N]>  |                | 창의 크기를 오른쪽으로 N칸만큼 증가 |        |
| ctrl+w [N]<  |                | 창의 크기를 왼쪽으로 N칸만큼 증가  |        |
 ## IDE 속 vim
    * ((-MQrrgOzV))