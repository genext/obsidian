---
title: Python Advanced Concepts
tags: [python, advanced, data-structures, http, data-model, functional-programming]
---
## Array of Tuples to Array of Dictionaries
### Example Code
```python
models = [("CNNAE", "19980129", "20200918"), ("Sample Model", "19980129", "20000101")]
print('Array of tuples: ', models)

v = list( map( lambda model: {
                 "name"     : model[0]
                ,"startDate": model[1]
                ,"endDate"  : model[2]
            },
            models))

print('Array of dicts: ', v)
```
### Output
```shell
Array of tuples:  [('CNNAE', '19980129', '20200918'), ('Sample Model', '19980129', '20000101')]
Array of dicts:  [{'name': 'CNNAE', 'startDate': '19980129', 'endDate': '20200918'}, {'name': 'Sample Model', 'startDate': '19980129', 'endDate': '20000101'}]
```
## HTTP Request Parameter Verification
### Numbers of Parameters
```python
# Django - dtproject

@api_view(["GET"])
def analyze(request):
  CONST_MANDATORY_ARGS = {"model_name", "date", "mem_IDX"}
    if len(CONST_MANDATORY_ARGS - set(request.GET.keys())):
        return Response(
             # "요청 포멧을 확인해 주세요."
             { "detail"      : CONST_HTTP_RESPONSE_CODE[400][1]
              ,"status_code" : status.HTTP_400_BAD_REQUEST }
            ,status = status.HTTP_200_OK
        )
```
## Python Data Model for Object Instance Creation
### How Objects Are Created
2-phase process:
- **Phase 1**: Object creation (`__new__`)
- **Phase 2**: Object initialization (`__init__`)
```python
class Person:
  def __new__(cls, name, age):
    instance = super().__new__(cls)
    return instance

  def __init__(self, name, age):
    self.name = name
    self.age = age

person = Person("Alice", 30)
```
### Special Cases
**Immutable objects** like `int`, `str`, `tuple` do their setup in `__new__` since they can't be modified after creation.
**Singleton pattern** can be implemented by controlling `__new__`:
```python
class Singleton:
  _instance = None

  def __new__(cls):
    if cls._instance is None:
      cls._instance = super().__new__(cls)
      return cls._instance

  def __init__(self):
    if not hasattr(self, 'initialized'):
      self.connection = "db_connection"
      self.initialized = True
```
## Map + Filter Usage Example
### Pattern
`list(filter(func, map(func, iterable)))`
즉 map의 결과를 func로 걸러낸다. map은 iterator를 돌려주지만 iterable객체 자리에 iterator도 올 수 있기 때문에 문제 없다.
```python
st = list(range(1,11))
fst = list(filter(lambda n: not(n%3), map(lambda n: n**2, st))) # --> [9, 36, 81]
```
